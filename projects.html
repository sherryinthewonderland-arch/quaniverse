
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Quaniverse Â· é¡¹ç›®åä½œå¤§å…</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    body { max-width: 800px; margin: auto; font-family: sans-serif; }
    h1 { text-align: center; }
    .card { border: 1px solid #ccc; margin-bottom: 10px; padding: 10px; background: #fff; }
    .card h3 { margin: 0; }
  </style>
</head>
<body>
  <h1>ğŸ“ Quaniverse é¡¹ç›®åä½œå¤§å…</h1>
  <div id="projects"></div>

  <h2>â• å‘èµ·æ–°é¡¹ç›®</h2>
  <form id="new-form">
    <label>é¡¹ç›®åç§°ï¼š</label><br><input name="title" required><br>
    <label>è¯´æ˜ï¼š</label><br><textarea name="description" required></textarea><br>
    <label>å‘èµ·äººIDï¼š</label><br><input name="creator" required><br>
    <label>åä½œè€…IDï¼ˆç”¨é€—å·åˆ†éš”ï¼‰ï¼š</label><br><input name="collaborators"><br>
    <button type="submit">åˆ›å»º</button>
  </form>
<script>
const list = document.getElementById("projects");

function loadProjects() {
  fetch("/get_projects").then(r => r.json()).then(data => {
    list.innerHTML = "";
    data.reverse().forEach(p => {
      const div = document.createElement("div");
      div.className = "card";
      div.innerHTML = `<h3>${p.title}</h3><p>${p.description}</p>
        <p><strong>å‘èµ·äºº:</strong> ${p.creator} | <strong>çŠ¶æ€:</strong> ${p.status}</p>
        <p><a href="/project/${p.id}.html">ğŸ” æŸ¥çœ‹è¯¦æƒ…</a></p>`;
      list.appendChild(div);
    });
  });
}

document.getElementById("new-form").addEventListener("submit", async e => {
  e.preventDefault();
  const form = e.target;
  const title = form.title.value;
  const description = form.description.value;
  const creator = form.creator.value;
  const collaborators = form.collaborators.value.split(",").map(s => s.trim());
  await fetch("/create_project", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({ title, description, creator, collaborators })
  });
  form.reset();
  loadProjects();
});

loadProjects();
</script>
</body>
</html>
